<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Horários de Recreio</title>
<link href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" rel="stylesheet">
<style>
body {
font-family: 'Open Sans', sans-serif;
margin: 0;
background: #f4f4f4;
display: flex;
justify-content: center;
min-height: 100vh;
overflow-y: scroll;
}

.main-wrapper {
background: white;
width: 100%;
max-width: 1000px;
padding: 20px;
box-shadow: 0 0 10px rgba(0,0,0,0.1);
margin: 20px 0;
}

.page-header {
text-align: center;
font-size: 1.8rem;
font-weight: bold;
margin-bottom: 30px;
color: #333;
}

.current-time {
font-size: 1rem;
font-weight: bold;
color: red;
background: #fff;
padding: 4px 8px;
border-radius: 4px;
box-shadow: 0 1px 3px rgba(0,0,0,0.15);
display: inline-block;
margin-top: 10px;
}

.turnos-container {
display: flex;
gap: 40px;
justify-content: space-around;
}

.turno {
flex-basis: 50%;
min-width: 300px;
}

.turno-header {
font-size: 1.2rem;
font-weight: 600;
color: #4285f4;
margin-bottom: 30px;
text-align: center;
padding: 5px 0;
border-bottom: 2px solid #ddd;
}

.timeline {
position: relative;
border-left: 2px solid #ddd;
padding-left: 45px;
padding-top: 20px;
padding-bottom: 40px;
height: 400px; 
box-sizing: content-box;
}

.time-slot {
position: absolute;
transform: translateY(-50%);
width: calc(100% - 45px);
}

.time-label {
position: absolute;
left: -40px;
font-size: 0.85rem;
color: #666;
font-weight: 600;
}

.event {
background: #eaf4ff;
padding: 8px 12px;
border-radius: 6px;
font-size: 0.9rem;
border-left: 4px solid #4285f4;
min-height: 40px;
display: flex;
align-items: center;
}

.current-time-line {
position: absolute;
left: 0;
right: 0;
height: 2px;
background: red;
z-index: 10;
display: none;
}

.current-time-dot {
position: absolute;
left: -7px;
top: -4px;
width: 10px;
height: 10px;
background: red;
border-radius: 50%;
}

.countdown-label {
position: absolute;
right: -65px;
top: -14px;
font-size: 0.85rem;
font-weight: bold;
color: #000;
background: #fff;
padding: 2px 4px;
border-radius: 4px;
box-shadow: 0 1px 3px rgba(0,0,0,0.15);
white-space: nowrap;
}

@media (max-width: 650px) {
	.main-wrapper {
		padding: 15px 10px;
		margin: 0;
		box-shadow: none;
	}
	.turnos-container {
		flex-direction: column;
		gap: 30px;
	}
	.turno {
		min-width: unset;
	}
	.timeline {
		height: auto;
		min-height: 350px;
	}
	.time-label {
		left: -30px;
		font-size: 0.75rem;
	}
	.countdown-label {
		right: -50px;
		font-size: 0.75rem;
		top: -11px;
	}
	.current-time {
		font-size: 0.85rem;
	}
}
</style>
</head>
<body>

<div class="main-wrapper">
<div class="page-header">
Recreios
<div class="current-time" id="headerCurrentTime">--:--:--</div>
</div>

<div class="turnos-container">
<div class="turno" id="turnoManha">
<div class="turno-header">Manhã</div>
<div class="timeline" id="timelineManha" data-start-time="07:15" data-end-time="10:00">

<div class="current-time-line" id="currentTimeLineManha">
<div class="current-time-dot"></div>
<div class="countdown-label" id="countdownLabelManha">AGUARDANDO</div>
</div>

<div class="time-slot" data-time="08:30" data-event-type="start">
<span class="time-label">08:30</span>
<div class="event">1º e 2ºEF</div>
</div>
<div class="time-slot" data-time="08:55">
<span class="time-label">08:55</span>
<div class="event">6º ao 8º</div>
</div>
<div class="time-slot" data-time="09:15">
<span class="time-label">09:15</span>
<div class="event">3º ao 5º</div>
</div>
<div class="time-slot" data-time="09:45">
<span class="time-label">09:45</span>
<div class="event">9º ao 3ºEM</div>
</div>
<div class="time-slot" data-time="10:00" data-event-type="end">
<span class="time-label"></span>
<div class="event" style="background: #fff; color: #666; border-color: transparent;"></div>
</div>
</div>
</div>

<div class="turno" id="turnoTarde">
<div class="turno-header">Tarde</div>
<div class="timeline" id="timelineTarde" data-start-time="13:15" data-end-time="16:00">

<div class="current-time-line" id="currentTimeLineTarde">
<div class="current-time-dot"></div>
<div class="countdown-label" id="countdownLabelTarde">AGUARDANDO</div>
</div>

<div class="time-slot" data-time="15:00" data-event-type="start">
<span class="time-label">14:35</span>
<div class="event">1º e 2ºEF</div>
</div>
<div class="time-slot" data-time="15:15">
<span class="time-label">15:55</span>
<div class="event">3º ao 5º</div>
</div>
<div class="time-slot" data-time="15:45">
<span class="time-label">15:45</span>
<div class="event">6º ao 9º</div>
</div>
<div class="time-slot" data-time="16:00" data-event-type="end">
<span class="time-label"></span>
<div class="event" style="background: #fff; color: #666; border-color: transparent;"></div>
</div>
</div>
</div>

<div class="turno" id="turnoSexta">
<div class="turno-header">Sexta</div>
<div class="timeline" id="timelineSexta" data-start-time="13:15" data-end-time="16:00">

<div class="current-time-line" id="currentTimeLineSexta">
<div class="current-time-dot"></div>
<div class="countdown-label" id="countdownLabelSexta">AGUARDANDO</div>
</div>

<div class="time-slot" data-time="15:00" data-event-type="start">
<span class="time-label">14:35</span>
<div class="event">1º e 2ºEF</div>
</div>
<div class="time-slot" data-time="15:15">
<span class="time-label">15:55</span>
<div class="event">3º ao 5º</div>
</div>
<div class="time-slot" data-time="15:45">
<span class="time-label">15:45</span>
<div class="event">6º ao 9º</div>
</div>
<div class="time-slot" data-time="16:00" data-event-type="end">
<span class="time-label"></span>
<div class="event" style="background: #fff; color: #666; border-color: transparent;"></div>
</div>
</div>
</div>
</div>
</div>

<script>
function timeToMinutes(time) {
const [h, m] = time.split(":").map(Number);
return h * 60 + m;
}

const allRecreios = {
Manha: [
{ start: "08:55", end: "09:10" },
{ start: "09:15", end: "09:30" },
{ start: "09:45", end: "10:00" }
],
Tarde: [
{ start: "15:00", end: "15:15" },
{ start: "15:15", end: "15:30" },
{ start: "15:45", end: "16:00" }
],
Sexta: [
{ start: "15:00", end: "15:15" },
{ start: "15:15", end: "15:30" },
{ start: "15:45", end: "16:00" }
]
};

function setTimeSlotPositions(timelineId) {
const timeline = document.getElementById(timelineId);
const startTime = timeToMinutes(timeline.getAttribute("data-start-time"));
const endTime = timeToMinutes(timeline.getAttribute("data-end-time"));
const totalMinutes = endTime - startTime;

timeline.querySelectorAll(".time-slot").forEach(slot => {
const time = timeToMinutes(slot.getAttribute("data-time"));

let percent = ((time - startTime) / totalMinutes) * 100;

const PADDING_OFFSET = 5; 
percent = PADDING_OFFSET + percent * (100 - 2 * PADDING_OFFSET) / 100;

if (percent < 0) percent = 0;
if (percent > 100) percent = 100;

slot.style.top = percent + "%";
});
}

setTimeSlotPositions("timelineManha");
setTimeSlotPositions("timelineTarde");
setTimeSlotPositions("timelineSexta");

function updateHeaderTime() {
const now = new Date();
const headerTime = document.getElementById("headerCurrentTime");
headerTime.textContent = now.toLocaleTimeString("pt-BR", { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false });
}

function updateTurnoTimeline(idPrefix) {
const now = new Date();
const currentMinutesTotal = now.getHours() * 60 + now.getMinutes() + now.getSeconds() / 60;

const timelineElement = document.getElementById(`timeline${idPrefix}`);
const startTime = timeToMinutes(timelineElement.getAttribute("data-start-time"));
const endTime = timeToMinutes(timelineElement.getAttribute("data-end-time"));
const totalMinutes = endTime - startTime;

const line = document.getElementById(`currentTimeLine${idPrefix}`);
const countdownLabel = document.getElementById(`countdownLabel${idPrefix}`);

if (currentMinutesTotal < startTime || currentMinutesTotal > endTime) {
	line.style.display = 'none';
	countdownLabel.textContent = "AGUARDANDO";
	return;
}

line.style.display = 'block';

let percent = ((currentMinutesTotal - startTime) / totalMinutes) * 100;

const PADDING_OFFSET = 5;
percent = PADDING_OFFSET + percent * (100 - 2 * PADDING_OFFSET) / 100;

if (percent < 0) percent = 0;
if (percent > 100) percent = 100;

line.style.top = percent + "%";

let targetMinutes = null;
let isBreakActive = false;

const turnoRecreios = allRecreios[idPrefix];

for (let rec of turnoRecreios) {
const start = timeToMinutes(rec.start);
const end = timeToMinutes(rec.end);

if (currentMinutesTotal >= start && currentMinutesTotal < end) {
	targetMinutes = end; // Time until the end of the current break
	isBreakActive = true;
	break;
} else if (currentMinutesTotal < start) {
	targetMinutes = start; // Time until the start of the next break
	break;
}
}

if (targetMinutes !== null) {
	const diffMinutes = targetMinutes - currentMinutesTotal;
	const diffSeconds = Math.round(diffMinutes * 60); 

	if (diffSeconds > 0) {
		const mm = String(Math.floor(diffSeconds / 60)).padStart(2, "0");
		const ss = String(diffSeconds % 60).padStart(2, "0");
		const prefix = isBreakActive ? "FIM DO RECREIO: -" : "PRÓXIMO RECREIO: -";
		countdownLabel.textContent = `${prefix}${mm}:${ss}`;
	} else {
		countdownLabel.textContent = isBreakActive ? "RECREIO TERMINOU!" : "RECREIO AGORA!";
	}
} else {
	countdownLabel.textContent = "FIM DOS RECREIOS";
}
}

function updateAllTimelines() {
updateHeaderTime();
updateTurnoTimeline("Manha");
updateTurnoTimeline("Tarde");
updateTurnoTimeline("Sexta");
}

setInterval(updateAllTimelines, 1000);
updateAllTimelines();
</script>

</body>
</html>